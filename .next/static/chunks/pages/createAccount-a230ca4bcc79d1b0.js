(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[689],{3842:(e,r,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/createAccount",function(){return t(8421)}])},8421:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>S});var n=t(3857),o=t(6284),a=t(3081),i=t.n(a),s=t(4232),c=t(7232),l=c.I4.div.withConfig({displayName:"createAccountStyledComponents__Container",componentId:"sc-1ns7rn4-0"})(["display:flex;justify-content:center;align-items:center;min-height:100vh;background:linear-gradient(135deg,"," 0%,"," 100%);padding:",";"],function(e){return e.theme.colors.background},function(e){return e.theme.colors.borderLight},function(e){return e.theme.spacing.xl}),d=c.I4.div.withConfig({displayName:"createAccountStyledComponents__FormWrapper",componentId:"sc-1ns7rn4-1"})(["background:",";padding:",";border-radius:",";box-shadow:",";width:100%;max-width:400px;text-align:center;border:1px solid ",";position:relative;overflow:hidden;&::before{content:'';position:absolute;top:0;left:0;right:0;height:4px;background:linear-gradient(90deg,",",",");}"],function(e){return e.theme.colors.surface},function(e){return e.theme.spacing.xxl},function(e){return e.theme.borderRadius.lg},function(e){return e.theme.shadows.xl},function(e){return e.theme.colors.borderLight},function(e){return e.theme.colors.primary},function(e){return e.theme.colors.secondary}),u=c.I4.h1.withConfig({displayName:"createAccountStyledComponents__FormTitle",componentId:"sc-1ns7rn4-2"})(["color:",";margin-bottom:",";font-size:",";font-weight:",";"],function(e){return e.theme.colors.text},function(e){return e.theme.spacing.sm},function(e){return e.theme.typography.h2},function(e){return e.theme.typography.bold}),m=c.I4.p.withConfig({displayName:"createAccountStyledComponents__FormDescription",componentId:"sc-1ns7rn4-3"})(["color:",";margin-bottom:",";font-size:",";line-height:",";"],function(e){return e.theme.colors.textSecondary},function(e){return e.theme.spacing.xl},function(e){return e.theme.typography.fontSize},function(e){return e.theme.typography.lineHeight}),h=c.I4.div.withConfig({displayName:"createAccountStyledComponents__InputWrapper",componentId:"sc-1ns7rn4-4"})(["margin-bottom:",";text-align:left;label{font-weight:",";display:block;margin-bottom:",";color:",";font-size:",";}input{width:100%;padding:",";border:2px solid ",";border-radius:",";font-size:",";transition:all ",";background:",";color:",";&:focus{outline:none;border-color:",";box-shadow:0 0 0 3px ","20;}&::placeholder{color:",';}&[aria-invalid="true"]{border-color:',";}}"],function(e){return e.theme.spacing.lg},function(e){return e.theme.typography.medium},function(e){return e.theme.spacing.sm},function(e){return e.theme.colors.text},function(e){return e.theme.typography.fontSize},function(e){return e.theme.spacing.md},function(e){return e.theme.colors.border},function(e){return e.theme.borderRadius.md},function(e){return e.theme.typography.fontSize},function(e){return e.theme.transitions.fast},function(e){return e.theme.colors.surface},function(e){return e.theme.colors.text},function(e){return e.theme.colors.primary},function(e){return e.theme.colors.primaryLight},function(e){return e.theme.colors.textLight},function(e){return e.theme.colors.error}),p=c.I4.p.withConfig({displayName:"createAccountStyledComponents__Error",componentId:"sc-1ns7rn4-5"})(["color:",";font-size:",";margin-top:",";text-align:left;font-weight:",";"],function(e){return e.theme.colors.error},function(e){return e.theme.typography.fontSizeSmall},function(e){return e.theme.spacing.sm},function(e){return e.theme.typography.medium}),f=c.I4.div.withConfig({displayName:"createAccountStyledComponents__AlertMessage",componentId:"sc-1ns7rn4-6"})(["background:",";border:2px solid ",";border-radius:",";padding:",";margin-bottom:",";text-align:left;position:relative;&::before{content:'⚠️';position:absolute;left:",";top:50%;transform:translateY(-50%);font-size:1.2em;}p{margin:0;padding-left:2rem;color:",";font-weight:",";font-size:",";}"],function(e){var r=e.theme,t=e.type;return"error"===t?r.colors.errorLight:"warning"===t?r.colors.warningLight:r.colors.infoLight},function(e){var r=e.theme,t=e.type;return"error"===t?r.colors.error:"warning"===t?r.colors.warning:r.colors.info},function(e){return e.theme.borderRadius.md},function(e){return e.theme.spacing.md},function(e){return e.theme.spacing.lg},function(e){return e.theme.spacing.md},function(e){var r=e.theme,t=e.type;return"error"===t?r.colors.error:"warning"===t?r.colors.warning:r.colors.info},function(e){return e.theme.typography.medium},function(e){return e.theme.typography.fontSize}),g=c.I4.p.withConfig({displayName:"createAccountStyledComponents__SuccessMessage",componentId:"sc-1ns7rn4-7"})(["color:",";font-size:",";margin-bottom:",";font-weight:",";"],function(e){return e.theme.colors.success},function(e){return e.theme.typography.fontSize},function(e){return e.theme.spacing.lg},function(e){return e.theme.typography.medium}),w=c.I4.div.withConfig({displayName:"createAccountStyledComponents__PasswordStrength",componentId:"sc-1ns7rn4-8"})(["margin-top:",";text-align:left;"],function(e){return e.theme.spacing.sm}),y=c.I4.p.withConfig({displayName:"createAccountStyledComponents__LinkText",componentId:"sc-1ns7rn4-9"})(["margin-top:",";color:",";font-size:",";a{color:",";text-decoration:none;font-weight:",";transition:color ",";&:hover{color:",";text-decoration:underline;}}"],function(e){return e.theme.spacing.xl},function(e){return e.theme.colors.textSecondary},function(e){return e.theme.typography.fontSize},function(e){return e.theme.colors.primary},function(e){return e.theme.typography.medium},function(e){return e.theme.transitions.fast},function(e){return e.theme.colors.primaryDark}),b=c.I4.button.withConfig({displayName:"createAccountStyledComponents__SubmitButton",componentId:"sc-1ns7rn4-10"})(["width:100%;padding:",";background:linear-gradient(135deg,"," 0%,"," 100%);color:",";border:none;border-radius:",";cursor:pointer;font-size:",";font-weight:",";transition:all ",";position:relative;overflow:hidden;&::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.2),transparent);transition:left ",";}&:hover:not(:disabled){transform:translateY(-1px);box-shadow:",";&::before{left:100%;}}&:active:not(:disabled){transform:translateY(0);}&:disabled{opacity:0.6;cursor:not-allowed;transform:none;&:hover{transform:none;box-shadow:none;}}"],function(e){return e.theme.spacing.md},function(e){return e.theme.colors.primary},function(e){return e.theme.colors.secondary},function(e){return e.theme.colors.surface},function(e){return e.theme.borderRadius.md},function(e){return e.theme.typography.fontSizeLarge},function(e){return e.theme.typography.semibold},function(e){return e.theme.transitions.fast},function(e){return e.theme.transitions.normal},function(e){return e.theme.shadows.md}),x=t(7876);function v(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function j(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?v(Object(t),!0).forEach(function(r){(0,o.A)(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}let S=function(){var e,r=(0,s.useState)({name:"",email:"",password:"",confirmPassword:""}),t=r[0],a=r[1],c=(0,s.useState)({}),v=c[0],S=c[1],P=(0,s.useState)(""),C=P[0],A=P[1],_=(0,s.useState)(!1),k=_[0],I=_[1],N=(0,s.useState)(!1),z=N[0],O=N[1],E=(0,s.useState)(!1),T=E[0],L=E[1],F=(0,s.useState)(!1),D=F[0],q=F[1],W=function(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)},Y=function(e){var r=[];return e.length<8&&r.push("Password must be at least 8 characters long"),/(?=.*[a-z])/.test(e)||r.push("Password must contain at least one lowercase letter"),/(?=.*[A-Z])/.test(e)||r.push("Password must contain at least one uppercase letter"),/(?=.*\d)/.test(e)||r.push("Password must contain at least one number"),r},R=function(e){var r=e.target,n=r.name,i=r.value;a(j(j({},t),{},(0,o.A)({},n,i))),v[n]&&S(j(j({},v),{},(0,o.A)({},n,""))),"email"===n&&D&&q(!1)},B=function(e){var r=e.target,n=r.name,o=r.value,a=j({},v);if("name"===n&&o&&(o.trim().length<2?a.name="Name must be at least 2 characters long":o.trim().length>50?a.name="Name cannot exceed 50 characters":delete a.name),"email"===n&&o&&(W(o)?delete a.email:a.email="Please enter a valid email address"),"password"===n&&o){var i=Y(o);i.length>0?a.password=i[0]:delete a.password}"confirmPassword"===n&&o&&(o!==t.password?a.confirmPassword="Passwords do not match":delete a.confirmPassword),S(a)},M=(e=(0,n.A)(i().mark(function e(r){var n,o,s,c,l;return i().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),I(!0),A(""),n={},t.name.trim()?t.name.trim().length<2?n.name="Name must be at least 2 characters long":t.name.trim().length>50&&(n.name="Name cannot exceed 50 characters"):n.name="Name is required",t.email.trim()?W(t.email)||(n.email="Please enter a valid email address"):n.email="Email is required",t.password?(o=Y(t.password)).length>0&&(n.password=o[0]):n.password="Password is required",t.confirmPassword?t.password!==t.confirmPassword&&(n.confirmPassword="Passwords do not match"):n.confirmPassword="Please confirm your password",!(Object.keys(n).length>0)){e.next=12;break}return S(n),I(!1),e.abrupt("return");case 12:return e.prev=12,e.next=15,fetch("http://localhost:3001/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:t.name.trim(),email:t.email.trim().toLowerCase(),password:t.password})});case 15:return s=e.sent,e.next=18,s.json();case 18:c=e.sent,s.ok?(S({}),q(!1),A("Account created successfully! Welcome to our juice store!"),c.data&&c.data.token?(localStorage.setItem("token",c.data.token),localStorage.setItem("user",JSON.stringify(c.data.user)),A("Account created successfully! You are now signed in. Welcome to our juice store!"),setTimeout(function(){a({name:"",email:"",password:"",confirmPassword:""}),A(""),q(!1),window.location.href="/"},2e3)):(A("Account created successfully! Please sign in to continue."),setTimeout(function(){a({name:"",email:"",password:"",confirmPassword:""}),A(""),q(!1)},3e3))):(429===s.status?S({general:"Too many account creation attempts. Please wait a moment and try again."}):c.errors&&Array.isArray(c.errors)?(l={},c.errors.forEach(function(e){e.includes("email")?l.email=e:e.includes("password")?l.password=e:e.includes("name")?l.name=e:l.general=e}),S(l)):"User with this email already exists"===c.message?(q(!0),S({email:"An account with this email address already exists. Please sign in instead or use a different email address.",general:"Account already exists"})):(q(!1),S({general:c.message||"Something went wrong"})),A("")),e.next=26;break;case 22:e.prev=22,e.t0=e.catch(12),S({general:"Server error. Please try again later."}),A("");case 26:return e.prev=26,I(!1),e.finish(26);case 29:case"end":return e.stop()}},e,null,[[12,22,26,29]])})),function(r){return e.apply(this,arguments)}),H=function(e){if(!e)return{score:0,label:"",color:""};var r=0;return e.length>=8&&r++,/(?=.*[a-z])/.test(e)&&r++,/(?=.*[A-Z])/.test(e)&&r++,/(?=.*\d)/.test(e)&&r++,/(?=.*[!@#$%^&*])/.test(e)&&r++,{score:Math.min(r,4),label:["Very Weak","Weak","Fair","Good","Strong"][Math.min(r,4)],color:["#ff4444","#ff8800","#ffbb33","#00C851","#007E33"][Math.min(r,4)]}}(t.password);return(0,x.jsx)(l,{children:(0,x.jsxs)(d,{children:[(0,x.jsx)(u,{children:"Create Your Account"}),(0,x.jsx)(m,{children:"Join our juice community and start your healthy journey"}),D&&(0,x.jsx)(f,{type:"warning",children:(0,x.jsxs)("p",{children:[(0,x.jsx)("strong",{children:"Account Already Exists!"}),(0,x.jsx)("br",{}),"An account with this email address already exists.",(0,x.jsx)("br",{}),(0,x.jsx)("a",{href:"/signIn",style:{color:"inherit",textDecoration:"underline",fontWeight:"bold"},children:"Click here to sign in instead"})]})}),v.general&&!D&&(0,x.jsx)(f,{type:"error",children:(0,x.jsx)("p",{children:v.general})}),C&&(0,x.jsx)(g,{children:C}),(0,x.jsxs)("form",{onSubmit:M,noValidate:!0,children:[(0,x.jsxs)(h,{children:[(0,x.jsx)("label",{htmlFor:"name",children:"Full Name"}),(0,x.jsx)("input",{id:"name",type:"text",name:"name",value:t.name,onChange:R,onBlur:B,placeholder:"Enter your full name","aria-describedby":v.name?"name-error":void 0,"aria-invalid":!!v.name,required:!0}),v.name&&(0,x.jsx)(p,{id:"name-error",role:"alert",children:v.name})]}),(0,x.jsxs)(h,{children:[(0,x.jsx)("label",{htmlFor:"email",children:"Email Address"}),(0,x.jsx)("input",{id:"email",type:"email",name:"email",value:t.email,onChange:R,onBlur:B,placeholder:"Enter your email address","aria-describedby":v.email?"email-error":void 0,"aria-invalid":!!v.email,required:!0}),v.email&&(0,x.jsx)(p,{id:"email-error",role:"alert",children:v.email})]}),(0,x.jsxs)(h,{children:[(0,x.jsx)("label",{htmlFor:"password",children:"Password"}),(0,x.jsxs)("div",{style:{position:"relative"},children:[(0,x.jsx)("input",{id:"password",type:z?"text":"password",name:"password",value:t.password,onChange:R,onBlur:B,placeholder:"Create a strong password","aria-describedby":v.password?"password-error":"password-strength","aria-invalid":!!v.password,required:!0}),(0,x.jsx)("button",{type:"button",onClick:function(){O(!z)},style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",fontSize:"16px"},"aria-label":z?"Hide password":"Show password",children:z?"\uD83D\uDE48":"\uD83D\uDC41️"})]}),t.password&&(0,x.jsxs)(w,{children:[(0,x.jsxs)("div",{style:{color:H.color,fontSize:"12px"},children:["Password Strength: ",H.label]}),(0,x.jsx)("div",{style:{width:"100%",height:"4px",background:"#eee",borderRadius:"2px",marginTop:"4px"},children:(0,x.jsx)("div",{style:{width:"".concat(H.score/4*100,"%"),height:"100%",background:H.color,borderRadius:"2px",transition:"width 0.3s ease"}})})]}),v.password&&(0,x.jsx)(p,{id:"password-error",role:"alert",children:v.password})]}),(0,x.jsxs)(h,{children:[(0,x.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),(0,x.jsxs)("div",{style:{position:"relative"},children:[(0,x.jsx)("input",{id:"confirmPassword",type:T?"text":"password",name:"confirmPassword",value:t.confirmPassword,onChange:R,onBlur:B,placeholder:"Confirm your password","aria-describedby":v.confirmPassword?"confirm-password-error":void 0,"aria-invalid":!!v.confirmPassword,required:!0}),(0,x.jsx)("button",{type:"button",onClick:function(){L(!T)},style:{position:"absolute",right:"10px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",fontSize:"16px"},"aria-label":T?"Hide password":"Show password",children:T?"\uD83D\uDE48":"\uD83D\uDC41️"})]}),v.confirmPassword&&(0,x.jsx)(p,{id:"confirm-password-error",role:"alert",children:v.confirmPassword})]}),(0,x.jsx)(b,{type:"submit",disabled:k,"aria-describedby":k?"submitting-message":void 0,children:k?"Creating Account...":"Create Account"}),k&&(0,x.jsx)("div",{id:"submitting-message",style:{marginTop:"10px",color:"#666",textAlign:"center"},children:"Please wait while we create your account..."})]}),(0,x.jsxs)(y,{children:["Already have an account? ",(0,x.jsx)("a",{href:"/signIn",children:"Sign in here"})]})]})})}}},e=>{e.O(0,[636,593,792],()=>e(e.s=3842)),_N_E=e.O()}]);